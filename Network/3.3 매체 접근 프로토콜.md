# 매체 접근 프로토콜

## 매체 접근 프로토콜

다중점 또는 브로드 캐스트 링크라는 공유 링크를 사용할 때는 링크에 접근하는 것을 조율하기 위한 다중 접근 프로토콜이다.

### 종류

- Random-access protocols(임의 접근)
    - ALOHA
    - CSMA/CD
    - CSMA/CA
- Contolled-access protocols(제어 접근)
    - Reservation
    - Polling
    - Token passing
- Channelization protocols(다루지 않을 예정)
    - FDMA
    - TDMA
    - CDMA

## 임의 접근

전송은 지국 사이에서 **임의**로 벌어진다.

매체에 접근하기위해 서로 **경쟁**한다.

### ALOHA

하와이 대학에서 개발되었다.

순수 ALOHA: 각 지국은 지국이 전송할 프레임이 있으면 언제든지 전송한다는 것. 그러나 한 채널만 있어 충돌이 발생한다. 그래서 ALOHA 프로토콜은 수신자가 잘 받았다는 확인 응답에 의존한다.

취약시간: 충돌의 위험이 있는 시간을 뜻한다.

틈새 ALOHA: 시작 시간을 미리 정해주는 방법이다. 순수보다는 충돌이 덜 발생, 매 시간 틈새가 시작할 때에 전송하도록 규제한다.

### 반송파 감지 다중 접근(CSMA)

충돌의 기회를 최소화하고 성능을 높이기 위해 사용

전송하기 이전에 먼저 매체에 귀를 기울일 것을 요구하며 다시말해 “전송이전에 감지” 규칙을 기반으로 한다.

지속방식: 충돌이 생겼을 때 어떻게 해결할 것인지 나누는 방식

- 1-지속감지: 휴지 상태인 것을 감지하게 되면 즉각 프레임을 전송한다. 모두 즉각 프레임을 전송
- 비지속 방식: 휴지 상태에 있으면 즉각 프레임을 보낸다. 그러나 휴지 상태에 있지 않으면 임의 시간을 대기하고 있다가 다시 회선을 감지한다.
- p-지속 방식: 휴지 상태에 있을 때 확률 p를 가지고 프레임을 전송한다.

### CSMA/CD(충돌검출)

프레임을 전송한 뒤에 전송이 성공적인지 매체를 관찰한다.

<img width="300" src="https://github.com/haesoo-y/fe-news-bot/assets/100929676/0e99d5f7-c76e-4a79-8fd5-de56ab346433">

1. A에서 데이터를 보내면 D에서 받는다. 이때 시간은 t라는 시간이 걸리게 된다.
2. 그러나 신호가 충돌이 발생하게된다. 충돌하게 된다면 A에게 다시 돌아갈때 확인 응답을 보낸다.

## CSMA/CD와 ALOHA의 차이점

### 첫번째

지속과정이 더해진것이다. 지속과정은 비지속, 1-지속, p-지속등이있다.

### 두번째

프레임 전송이다.

ALOHA처럼 전체 프레임을 보내고 나서 응답을 기다리는 것이 아닌 CSMA/CD에서는 프레임 전송과 충돌 감지는 연속된 과정이다.

전체 프레임을 보내고 난 후에 충돌했는지 찾는 것이 아니다.

### 세번째

충돌이 생겼을 때 모든 지국이 충돌에 대해 알 수 있도록 짧은 길이의 충돌신호를 보내어 충돌 사실을 알리는것이다.

## 반송파 감지 다중 접근/충돌 회피(CSMA/CA)

무선 LAN을 위해 개발되었다.

유선LAN(CSMA/CD)를 사용하고 무선LAN일 경우(CSMA/CA)를 사용한다. 무선LAN이라면 충돌을 확인 하기 힘들어 회피한다.

## 제어접근

### 예약

데이터를 전송하기 전에 예약을 해야한다.

### 폴링

종국으로 가는 데이터도 모두 주국을 통해서 전달된다. 주국이 링크를 제어하며 종국은 그지시를 따른다. 사용하느냐 하는 것은 오로지 주국의 결정에 따른다.

### 토큰 전달(이어달리기)

토큰이라 불리는 특별한 패킷이 링을 따라서 순회한다. 토큰을 확보한 지국은 채널 접근 권한을 갖게되고 데이터를 전송하게 된다. 지국이 보낼 데이터가 생기면 지국은 선행자로부터 토큰을 받을 때까지 기다린다.

토큰 관리가 필요하며 시간에 제한을 두어야한다. 왜냐하면 토큰이 손실되거나 손상될 수 있으며 이렇게 되지 않도록 감시해야한다.